CREATE DATABASE QUANLYCAYGIAPHA

USE QUANLYCAYGIAPHA

CREATE TABLE QUEQUAN
(
	MAQQ CHAR(10) PRIMARY KEY ,
	TenQQ nvarchar(50) not null,
)

CREATE TABLE NGHENGHIEP
(
	MANNghiep CHAR(10) PRIMARY KEY ,
	TenNNghiep nvarchar(30) not null,
)

CREATE TABLE NGUYENNHANMAT
(
	MANNhan CHAR(10) PRIMARY KEY ,
	TenNNhan nvarchar(20) not null,
)

CREATE TABLE LOAITHANHTICH
(
	MaLTT CHAR(10) PRIMARY KEY ,
	TenTT nvarchar(20) not null,
)

CREATE TABLE DIADIEMMAITANG
(
	MaDD CHAR(10) PRIMARY KEY ,
	TenDiaDiem nvarchar(50) not null,
)

CREATE TABLE THANHVIEN
(
	MATV CHAR(10) PRIMARY KEY ,
	MAQQ CHAR(10) foreign key references QUEQUAN(MAQQ),
	HoTen nvarchar(50) not null ,
	GioiTinh nvarchar(10) not null ,
	NgaySinh smalldatetime not null ,
	NgayVaoHo smalldatetime not null ,
	Doi int not null,
	TenDC nvarchar(50) not null ,
	MATVCu nvarchar(10),
)


create table THANHTICH
(
	MATV CHAR(10) foreign key references THANHVIEN(MATV),
	MaLTT CHAR(10) foreign key references LOAITHANHTICH(MaLTT),
	NgayPhatSinh smalldatetime ,
	CONSTRAINT PK_TV_TT PRIMARY KEY (MATV , MaLTT),
)

create table LOAIQUANHE
(
	MATV_T CHAR(10) foreign key references THANHVIEN(MATV),
	MATV_S char(10) foreign key references THANHVIEN(MATV),
	GhiChu nvarchar (20) ,
	CONSTRAINT PK_TV_LQH PRIMARY KEY (MATV_T , MATV_S),
)

create table THANHVIEN_NGHENGHIEP
(
  MATV CHAR(10) foreign key references THANHVIEN(MATV),
  MANNghiep CHAR(10) foreign key references NGHENGHIEP(MANNghiep),
  CONSTRAINT PK_TV_NN PRIMARY KEY (MATV , MANNghiep),
)

create table KETTHUC
(
	MAKT char(10) primary key ,
	MANNhan CHAR(10)foreign key references NGUYENNHANMAT(MANNhan),
	MATV CHAR(10) foreign key references THANHVIEN(MATV),
	NgayMat smalldatetime,
)

create table KETTHUC_DDMAITANG
(
	MAKT char(10) foreign key references KETTHUC(MAKT),
	MaDD CHAR(10)foreign key references DIADIEMMAITANG(MaDD),
	CONSTRAINT PK_KT_DDMT PRIMARY KEY (MAKT , MaDD),
)
CREATE TABLE NguoiDung
(
	TaiKhoan nvarchar(20) primary key ,
	MatKhau nvarchar(20) ,
)
create table THAMSO
(
	SoQQ INT ,
	SoNN INT ,
	SoLTT INT ,
	SoNNM INT ,
	SoDDMT INT ,
)
INSERT INTO THAMSO VALUES ('4','15','10','12','3')
--thêm người dùng
INSERT INTO NguoiDung VALUES ('admin','admin')

select TenTT from THANHTICH as TT ,LOAITHANHTICH as LoaiTT 

-- thêm quê quán
INSERT INTO QUEQUAN VALUES('QQ01',N'Nghệ An')
INSERT INTO QUEQUAN VALUES('QQ02',N'Dăk Lăk')
INSERT INTO QUEQUAN VALUES('QQ03',N'Quảng Ngãi')
INSERT INTO QUEQUAN VALUES('QQ04',N'Thành Phố Hồ Chí Minh')
--thêm nghề nghiệp
INSERT INTO NGHENGHIEP VALUES('NN01',N'Công An')
INSERT INTO NGHENGHIEP VALUES('NN02',N'Lập trình viên')
INSERT INTO NGHENGHIEP VALUES('NN03',N'Kỹ sư xây dựng')
INSERT INTO NGHENGHIEP VALUES('NN04',N'Học sinh ,Sinh viên')
INSERT INTO NGHENGHIEP VALUES('NN05',N'Nông')
INSERT INTO NGHENGHIEP VALUES('NN06',N'Thương gia')
INSERT INTO NGHENGHIEP VALUES('NN07',N'Bất động sản')
INSERT INTO NGHENGHIEP VALUES('NN08',N'Bác Sỹ')
INSERT INTO NGHENGHIEP VALUES('NN09',N'Y tá')
INSERT INTO NGHENGHIEP VALUES('NN10',N'Thư ký')
INSERT INTO NGHENGHIEP VALUES('NN11',N'Nhân viên văn phòng')
INSERT INTO NGHENGHIEP VALUES('NN12',N'Kiến trúc sư')
INSERT INTO NGHENGHIEP VALUES('NN13',N'Giáo viên')
INSERT INTO NGHENGHIEP VALUES('NN14',N'Hoạ sĩ')
INSERT INTO NGHENGHIEP VALUES('NN15',N'Giám đốc ,Quản lý cấp cao')
--DELETE FROM NGHENGHIEP
--thêm loại thành tích
INSERT INTO LOAITHANHTICH VALUES('LTT01',N'HọcTập')
INSERT INTO LOAITHANHTICH VALUES('LTT02',N'Lao Động')
INSERT INTO LOAITHANHTICH VALUES('LTT03',N'Cống Hiến')
INSERT INTO LOAITHANHTICH VALUES('LTT04',N'Ngoại Giao')
INSERT INTO LOAITHANHTICH VALUES('LTT05',N'Tuyên Truyền')
INSERT INTO LOAITHANHTICH VALUES('LTT06',N'Gương Mẫu')
INSERT INTO LOAITHANHTICH VALUES('LTT07',N'Tấm Gương Sáng')
INSERT INTO LOAITHANHTICH VALUES('LTT08',N'Phong Trào')
INSERT INTO LOAITHANHTICH VALUES('LTT09',N'Văn Hóa')
INSERT INTO LOAITHANHTICH VALUES('LTT10',N'Danh Hiệu')
--thêm nguyên nhân mất
INSERT INTO NGUYENNHANMAT VALUES('NNM01',N'Tai nạn lao động')
INSERT INTO NGUYENNHANMAT VALUES('NNM02',N'Ung Thư')
INSERT INTO NGUYENNHANMAT VALUES('NNM03',N'Đột quỵ')
INSERT INTO NGUYENNHANMAT VALUES('NNM04',N'Tai nạn giao thông')
INSERT INTO NGUYENNHANMAT VALUES('NNM05',N'Bệnh sởi')
INSERT INTO NGUYENNHANMAT VALUES('NNM06',N'Bệnh sốt xuất huyết')
INSERT INTO NGUYENNHANMAT VALUES('NNM07',N'Suy thận')
INSERT INTO NGUYENNHANMAT VALUES('NNM08',N'Bệnh dịch hạch')
INSERT INTO NGUYENNHANMAT VALUES('NNM09',N'Bệnh tim mạch')
INSERT INTO NGUYENNHANMAT VALUES('NNM10',N'Bệnh Lao')
INSERT INTO NGUYENNHANMAT VALUES('NNM11',N'HIV/AIDS')
INSERT INTO NGUYENNHANMAT VALUES('NNM12',N'Đái tháo đường')
--thêm địa điểm mai tán 
INSERT INTO DIADIEMMAITANG VALUES('DDMT01',N'Quê nhà')
INSERT INTO DIADIEMMAITANG VALUES('DDMT02',N'Nghĩa trang Thành Phố Hồ Chí Minh')
INSERT INTO DIADIEMMAITANG VALUES('DDMT03',N'Nghĩa trang Bình Hưng Hòa')
INSERT INTO DIADIEMMAITANG VALUES('DDMT04',N'Nghĩa trang Nhân dân Bình An')
select tv.HoTen from THANHVIEN tv, LOAIQUANHE lqh where lqh.MATV_T = tv.MATV and MATV_S= 'TV03'
--thêm thành viên
--set ngày
SET DATEFORMAT DMY
INSERT INTO THANHVIEN (MATV ,MAQQ ,HoTen ,GioiTinh ,NgaySinh ,NgayVaoHo,Doi,TenDC ) VALUES('TV01','QQ01',N'Trần Gia Nghĩa','Nam','4/4/1910','4/4/1910','1',N'123 Lê Duẩn ,Quận 1,TP Hồ Chí Minh')

INSERT INTO THANHVIEN VALUES('TV02','QQ01',N'Trần Quang Minh','Nam','4/4/1920','4/4/1920','2',N'169 Hai Bà Trưng ,Quận 1,TP Hồ Chí Minh','TV01')
INSERT INTO THANHVIEN VALUES('TV03','QQ03',N'Nguyễn Thị Mai',N'Nữ','4/4/1930','31/5/2017','1',N'199 ,Lê Duẩn,Quận 1,TP Hồ Chí Minh','TV01')
INSERT INTO THANHVIEN VALUES('TV04','QQ01',N'Trần Duy Nam','Nam','4/4/1940','31/5/2017','2',N'166 ,Hai Bà Trưng ,Quận 1,TP Hồ Chí Minh','TV01')
INSERT INTO THANHVIEN VALUES('TV05','QQ02',N'Trần Duy Mạnh','Nam','4/4/1950','31/5/2017','3',N'166 ,CMT 8 ,Quận Tân Bình,TP Hồ Chí Minh','TV02')
INSERT INTO THANHVIEN VALUES('TV06','QQ03',N'Nguyễn Thị Nữ',N'Nữ','4/4/1955','31/5/2017','2',N'166 ,Nam Kì Khởi Nghĩa ,Quận 1,TP Hồ Chí Minh','TV02')
INSERT INTO THANHVIEN VALUES('TV07','QQ04',N'Trần Văn Cường',N'Nam','4/4/1960','31/5/2017','3',N'199 ,Bàn Cờ ,Quận 3,TP Hồ Chí Minh','TV04')
INSERT INTO THANHVIEN VALUES('TV08','QQ05',N'Lê Thị Hoa',N'Nam','4/4/1965','31/5/2017','2',N'233 ,Nguyễn Thiện Thuật ,Quận 3,TP Hồ Chí Minh','TV04')
INSERT INTO THANHVIEN VALUES('TV09','QQ06',N'Trần Thị Trang',N'Nữ','4/4/1970','31/5/2017','3',N'164 ,Nguyễn Huệ ,Quận 1,TP Hồ Chí Minh','TV04')
INSERT INTO THANHVIEN VALUES('TV10','QQ07',N'Lê Văn Nam',N'Nam','4/4/1965','31/5/2017','3',N'Bù Đăng ,Bình Phước','TV04')
--ALTER TABLE THANHVIEN ALTER COLUMN NgaySinh smalldatetime
--DELETE FROM THANHVIEN
--thêm thành tích
INSERT INTO THANHTICH VALUES('TV01','LTT03','5/4/1940')
INSERT INTO THANHTICH VALUES('TV01','LTT02','4/5/1950')
INSERT INTO THANHTICH VALUES('TV02','LTT01','4/6/1960')
INSERT INTO THANHTICH VALUES('TV03','LTT06','4/8/1965')
--thêm thành viên- nghề nghiệp
INSERT INTO THANHVIEN_NGHENGHIEP VALUES('TV01','NN01')
INSERT INTO THANHVIEN_NGHENGHIEP VALUES('TV02','NN02')
INSERT INTO THANHVIEN_NGHENGHIEP VALUES('TV03','NN03')
INSERT INTO THANHVIEN_NGHENGHIEP VALUES('TV04','NN04')
INSERT INTO THANHVIEN_NGHENGHIEP VALUES('TV05','NN05')
INSERT INTO THANHVIEN_NGHENGHIEP VALUES('TV06','NN06')
--Thêm kết thúc
INSERT INTO KETTHUC VALUES('KT01','NNM01','TV01','5/4/1940')
INSERT INTO KETTHUC VALUES('KT02','NNM02','TV02','5/4/1945')
INSERT INTO KETTHUC VALUES('KT03','NNM03','TV03','5/4/1950')
--Thêm kết thúc - địa điểm mai táng
INSERT INTO KETTHUC_DDMAITANG VALUES('KT01','DDMT01')
INSERT INTO KETTHUC_DDMAITANG VALUES('KT02','DDMT02')
INSERT INTO KETTHUC_DDMAITANG VALUES('KT03','DDMT03')
--Thêm loại quan hệ
INSERT INTO LOAIQUANHE VALUES('TV01','TV02','Con')
INSERT INTO LOAIQUANHE VALUES('TV01','TV03',N'Vợ')
INSERT INTO LOAIQUANHE VALUES('TV01','TV04','Con')
INSERT INTO LOAIQUANHE VALUES('TV02','TV05','Con')
INSERT INTO LOAIQUANHE VALUES('TV02','TV06',N'Vợ')
INSERT INTO LOAIQUANHE VALUES('TV04','TV07','Con')
INSERT INTO LOAIQUANHE VALUES('TV04','TV08',N'Vợ')
INSERT INTO LOAIQUANHE VALUES('TV04','TV09','Con')
INSERT INTO LOAIQUANHE VALUES('TV04','TV10','Con')
